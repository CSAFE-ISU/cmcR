type = "known non-match"))) %>%
group_by(type,cellID) %>%
filter(corr == max(corr)) %>%
ggplot(aes(x = corr,fill = type)) +
geom_histogram(bins = 20) +
xlim(c(0,1)) +
xlab("Max CCF value") +
ggtitle("KM vs KNM Max CCF Distributions - No Bandpass Filter, No residuals") +
theme_bw()
dat1 <- cmcR:::selectBFImpression_sample_x3p("~/bulletCartridgeScans/Fadul (2011)/cc/Fadul 1-1.x3p",
use_residuals = TRUE,
ransacInlierThresh = (10^-5),
ransacIters = 100) #%>%
# cmcR:::gaussianFilterBF(wavelength = c(16,250),
#                         filtertype = "bp")
dat2 <- cmcR:::selectBFImpression_sample_x3p("~/bulletCartridgeScans/Fadul (2011)/cc/Fadul 1-2.x3p",
use_residuals = TRUE,
ransacInlierThresh = (10^-5),
ransacIters = 100) #%>%
# cmcR:::gaussianFilterBF(wavelength = c(16,250),
#                         filtertype = "bp")
dat1$surface.matrix %>%
as.cimg() %>%
plot()
dat2$surface.matrix %>%
as.cimg() %>%
plot()
dat3 <- cellCCF(dat1$surface.matrix,
dat2$surface.matrix,thetas = seq(-30,30,by = 1),
horizSplits = 8,
vertSplits = 8)
dat3 %>%
map2_dfr(.x = .,
.y = names(.),
~ .x %>%
mutate(theta = rep(.y,times = nrow(.)))) %>%
group_by(cellID) %>%
filter(corr == max(corr)) %>%
ggplot(aes(x = corr)) +
geom_histogram(bins = 30) +
xlim(c(0,1)) +
xlab("Max CCF value distribution") +
theme_bw() +
ggtitle("Known-match Max CCF distribution")
# dat1 <- cmcR:::selectBFImpression_sample_x3p("~/bulletCartridgeScans/Fadul (2011)/cc/Fadul 1-1.x3p",
#                                          use_residuals = TRUE,
#                                          ransacInlierThresh = (10^-5),
#                                          ransacIters = 100) %>%
#   cmcR:::gaussianFilterBF(wavelength = c(16,250),
#                           filtertype = "bp")
dat2 <- cmcR:::selectBFImpression_sample_x3p("~/bulletCartridgeScans/fadul_allScans/Fadul_8/cc/Fadul X.x3p",
use_residuals = FALSE,
ransacInlierThresh = (10^-5),
ransacIters = 100) #%>%
# cmcR:::gaussianFilterBF(wavelength = c(16,250),
#                         filtertype = "bp")
dat1$surface.matrix %>%
as.cimg() %>%
plot()
dat2$surface.matrix %>%
as.cimg() %>%
plot()
dat4 <- cellCCF(dat1$surface.matrix,
dat2$surface.matrix,thetas = seq(-30,30,by = 1),
horizSplits = 8,
vertSplits = 8)
dat4 %>%
map2_dfr(.x = .,
.y = names(.),
~ .x %>%
mutate(theta = rep(.y,times = nrow(.)))) %>%
group_by(cellID) %>%
filter(corr == max(corr)) %>%
ggplot(aes(x = corr)) +
geom_histogram() +
xlim(c(0,1)) +
xlab("Max CCF value distribution")
dat3 %>%
map2_dfr(.x = .,
.y = names(.),
~ .x %>%
mutate(theta = rep(.y,times = nrow(.)),
type = "known match")) %>%
bind_rows(dat4 %>%
map2_dfr(.x = .,
.y = names(.),
~ .x %>%
mutate(theta = rep(.y,times = nrow(.)),
type = "known non-match"))) %>%
group_by(type,cellID) %>%
filter(corr == max(corr)) %>%
ggplot(aes(x = corr,fill = type)) +
geom_histogram(bins = 20) +
xlim(c(0,1)) +
xlab("Max CCF value") +
ggtitle("KM vs KNM Max CCF Distributions - No Bandpass Filter") +
theme_bw()
# dat1 <- cmcR:::selectBFImpression_sample_x3p("~/bulletCartridgeScans/Fadul (2011)/cc/Fadul 1-1.x3p",
#                                          use_residuals = TRUE,
#                                          ransacInlierThresh = (10^-5),
#                                          ransacIters = 100) %>%
#   cmcR:::gaussianFilterBF(wavelength = c(16,250),
#                           filtertype = "bp")
dat2 <- cmcR:::selectBFImpression_sample_x3p("~/bulletCartridgeScans/fadul_allScans/Fadul_8/cc/Fadul X.x3p",
use_residuals = TRUE,
ransacInlierThresh = (10^-5),
ransacIters = 100) #%>%
# cmcR:::gaussianFilterBF(wavelength = c(16,250),
#                         filtertype = "bp")
dat1$surface.matrix %>%
as.cimg() %>%
plot()
dat2$surface.matrix %>%
as.cimg() %>%
plot()
dat4 <- cellCCF(dat1$surface.matrix,
dat2$surface.matrix,thetas = seq(-30,30,by = 1),
horizSplits = 8,
vertSplits = 8)
# dat1 <- cmcR:::selectBFImpression_sample_x3p("~/bulletCartridgeScans/Fadul (2011)/cc/Fadul 1-1.x3p",
#                                          use_residuals = TRUE,
#                                          ransacInlierThresh = (10^-5),
#                                          ransacIters = 100) %>%
#   cmcR:::gaussianFilterBF(wavelength = c(16,250),
#                           filtertype = "bp")
dat2 <- cmcR:::selectBFImpression_sample_x3p("~/bulletCartridgeScans/fadul_allScans/Fadul_8/cc/Fadul X.x3p",
use_residuals = TRUE,
ransacInlierThresh = (10^-5),
ransacIters = 100) #%>%
# cmcR:::gaussianFilterBF(wavelength = c(16,250),
#                         filtertype = "bp")
dat1$surface.matrix %>%
as.cimg() %>%
plot()
dat2$surface.matrix %>%
as.cimg() %>%
plot()
dat4 <- cellCCF(dat1$surface.matrix,
dat2$surface.matrix,thetas = seq(-30,30,by = 1),
horizSplits = 8,
vertSplits = 8)
dat2 <- cmcR:::selectBFImpression_sample_x3p("~/bulletCartridgeScans/fadul_allScans/Fadul_8/cc/Fadul X.x3p",
use_residuals = TRUE,
ransacInlierThresh = (10^-5),
ransacIters = 100) #%>%
dat2$surface.matrix %>%
as.cimg() %>%
plot()
dat4 <- cellCCF(dat1$surface.matrix,
dat2$surface.matrix,thetas = seq(-30,30,by = 1),
horizSplits = 8,
vertSplits = 8)
dat4 %>%
map2_dfr(.x = .,
.y = names(.),
~ .x %>%
mutate(theta = rep(.y,times = nrow(.)))) %>%
group_by(cellID) %>%
filter(corr == max(corr)) %>%
ggplot(aes(x = corr)) +
geom_histogram() +
xlim(c(0,1)) +
xlab("Max CCF value distribution")
dat3 %>%
map2_dfr(.x = .,
.y = names(.),
~ .x %>%
mutate(theta = rep(.y,times = nrow(.)),
type = "known match")) %>%
bind_rows(dat4 %>%
map2_dfr(.x = .,
.y = names(.),
~ .x %>%
mutate(theta = rep(.y,times = nrow(.)),
type = "known non-match"))) %>%
group_by(type,cellID) %>%
filter(corr == max(corr)) %>%
ggplot(aes(x = corr,fill = type)) +
geom_histogram(bins = 20) +
xlim(c(0,1)) +
xlab("Max CCF value") +
ggtitle("KM vs KNM Max CCF Distributions - No Bandpass Filter") +
theme_bw()
dat3 %>%
map2_dfr(.x = .,
.y = names(.),
~ .x %>%
mutate(theta = rep(.y,times = nrow(.)),
type = "known match")) %>%
bind_rows(dat4 %>%
map2_dfr(.x = .,
.y = names(.),
~ .x %>%
mutate(theta = rep(.y,times = nrow(.)),
type = "known non-match"))) %>%
group_by(type,cellID) %>%
filter(corr == max(corr)) %>%
ggplot(aes(x = corr,fill = type)) +
geom_histogram(bins = 20) +
xlim(c(0,1)) +
xlab("Max CCF value") +
ggtitle("KM vs KNM Max CCF Distributions - No Bandpass Filter, Residuals") +
theme_bw()
dat3 %>%
map2_dfr(.x = .,
.y = names(.),
~ .x %>%
mutate(theta = rep(.y,times = nrow(.)),
type = "known match")) %>%
bind_rows(dat4 %>%
map2_dfr(.x = .,
.y = names(.),
~ .x %>%
mutate(theta = rep(.y,times = nrow(.)),
type = "known non-match"))) %>%
group_by(type,cellID) %>%
filter(corr == max(corr)) %>%
ggplot(aes(x = corr,fill = type)) +
geom_histogram(bins = 20) +
xlim(c(0,1)) +
xlab("Max CCF value") +
ggtitle("KM vs KNM Max CCFs - No Bandpass Filter, Residuals") +
theme_bw()
dat2$surface.matrix %>%
as.cimg() %>%
plot()
dat1 <- cmcR:::selectBFImpression_sample_x3p("~/bulletCartridgeScans/Fadul (2011)/cc/Fadul 1-1.x3p",
use_residuals = FALSE,
ransacInlierThresh = (10^-5),
ransacIters = 100) #%>%
# cmcR:::gaussianFilterBF(wavelength = c(16,250),
#                         filtertype = "bp")
dat2 <- cmcR:::selectBFImpression_sample_x3p("~/bulletCartridgeScans/Fadul (2011)/cc/Fadul 1-2.x3p",
use_residuals = FALSE,
ransacInlierThresh = (10^-5),
ransacIters = 100) #%>%
# cmcR:::gaussianFilterBF(wavelength = c(16,250),
#                         filtertype = "bp")
dat1$surface.matrix %>%
as.cimg() %>%
plot()
dat2$surface.matrix %>%
as.cimg() %>%
plot()
dat3 <- cellCCF(dat1$surface.matrix,
dat2$surface.matrix,thetas = seq(-30,30,by = 1),
horizSplits = 8,
vertSplits = 8)
dat3 %>%
map2_dfr(.x = .,
.y = names(.),
~ .x %>%
mutate(theta = rep(.y,times = nrow(.)))) %>%
group_by(cellID) %>%
filter(corr == max(corr)) %>%
ggplot(aes(x = corr)) +
geom_histogram(bins = 30) +
xlim(c(0,1)) +
xlab("Max CCF value distribution") +
theme_bw() +
ggtitle("Known-match Max CCF distribution")
# dat1 <- cmcR:::selectBFImpression_sample_x3p("~/bulletCartridgeScans/Fadul (2011)/cc/Fadul 1-1.x3p",
#                                          use_residuals = TRUE,
#                                          ransacInlierThresh = (10^-5),
#                                          ransacIters = 100) %>%
#   cmcR:::gaussianFilterBF(wavelength = c(16,250),
#                           filtertype = "bp")
dat2 <- cmcR:::selectBFImpression_sample_x3p("~/bulletCartridgeScans/fadul_allScans/Fadul_8/cc/Fadul X.x3p",
use_residuals = FALSE,
ransacInlierThresh = (10^-5),
ransacIters = 100) #%>%
# cmcR:::gaussianFilterBF(wavelength = c(16,250),
#                         filtertype = "bp")
dat1$surface.matrix %>%
as.cimg() %>%
plot()
dat2$surface.matrix %>%
as.cimg() %>%
plot()
dat4 <- cellCCF(dat1$surface.matrix,
dat2$surface.matrix,thetas = seq(-30,30,by = 1),
horizSplits = 8,
vertSplits = 8)
dat4 %>%
map2_dfr(.x = .,
.y = names(.),
~ .x %>%
mutate(theta = rep(.y,times = nrow(.)))) %>%
group_by(cellID) %>%
filter(corr == max(corr)) %>%
ggplot(aes(x = corr)) +
geom_histogram() +
xlim(c(0,1)) +
xlab("Max CCF value distribution")
dat3 %>%
map2_dfr(.x = .,
.y = names(.),
~ .x %>%
mutate(theta = rep(.y,times = nrow(.)),
type = "known match")) %>%
bind_rows(dat4 %>%
map2_dfr(.x = .,
.y = names(.),
~ .x %>%
mutate(theta = rep(.y,times = nrow(.)),
type = "known non-match"))) %>%
group_by(type,cellID) %>%
filter(corr == max(corr)) %>%
ggplot(aes(x = corr,fill = type)) +
geom_histogram(bins = 20) +
xlim(c(0,1)) +
xlab("Max CCF value") +
ggtitle("KM vs KNM Max CCFs - No Bandpass Filter, Raw Values") +
theme_bw()
dat1 <- cmcR:::selectBFImpression_sample_x3p("~/bulletCartridgeScans/Fadul (2011)/cc/Fadul 1-1.x3p",
use_residuals = FALSE,
ransacInlierThresh = (10^-5),
ransacIters = 100) %>%
cmcR:::gaussianFilterBF(wavelength = c(16,250),
filtertype = "bp")
dat2 <- cmcR:::selectBFImpression_sample_x3p("~/bulletCartridgeScans/Fadul (2011)/cc/Fadul 1-2.x3p",
use_residuals = FALSE,
ransacInlierThresh = (10^-5),
ransacIters = 100) %>%
cmcR:::gaussianFilterBF(wavelength = c(16,250),
filtertype = "bp")
dat1$surface.matrix %>%
as.cimg() %>%
plot()
dat2$surface.matrix %>%
as.cimg() %>%
plot()
dat3 <- cellCCF(dat1$surface.matrix,
dat2$surface.matrix,thetas = seq(-30,30,by = 1),
horizSplits = 8,
vertSplits = 8)
dat3 %>%
map2_dfr(.x = .,
.y = names(.),
~ .x %>%
mutate(theta = rep(.y,times = nrow(.)))) %>%
group_by(cellID) %>%
filter(corr == max(corr)) %>%
ggplot(aes(x = corr)) +
geom_histogram(bins = 30) +
xlim(c(0,1)) +
xlab("Max CCF value distribution") +
theme_bw() +
ggtitle("Known-match Max CCF distribution")
# dat1 <- cmcR:::selectBFImpression_sample_x3p("~/bulletCartridgeScans/Fadul (2011)/cc/Fadul 1-1.x3p",
#                                          use_residuals = TRUE,
#                                          ransacInlierThresh = (10^-5),
#                                          ransacIters = 100) %>%
#   cmcR:::gaussianFilterBF(wavelength = c(16,250),
#                           filtertype = "bp")
dat2 <- cmcR:::selectBFImpression_sample_x3p("~/bulletCartridgeScans/fadul_allScans/Fadul_8/cc/Fadul X.x3p",
use_residuals = FALSE,
ransacInlierThresh = (10^-5),
ransacIters = 100) %>%
cmcR:::gaussianFilterBF(wavelength = c(16,250),
filtertype = "bp")
dat1$surface.matrix %>%
as.cimg() %>%
plot()
dat2$surface.matrix %>%
as.cimg() %>%
plot()
dat4 <- cellCCF(dat1$surface.matrix,
dat2$surface.matrix,thetas = seq(-30,30,by = 1),
horizSplits = 8,
vertSplits = 8)
dat4 %>%
map2_dfr(.x = .,
.y = names(.),
~ .x %>%
mutate(theta = rep(.y,times = nrow(.)))) %>%
group_by(cellID) %>%
filter(corr == max(corr)) %>%
ggplot(aes(x = corr)) +
geom_histogram() +
xlim(c(0,1)) +
xlab("Max CCF value distribution")
dat3 %>%
map2_dfr(.x = .,
.y = names(.),
~ .x %>%
mutate(theta = rep(.y,times = nrow(.)),
type = "known match")) %>%
bind_rows(dat4 %>%
map2_dfr(.x = .,
.y = names(.),
~ .x %>%
mutate(theta = rep(.y,times = nrow(.)),
type = "known non-match"))) %>%
group_by(type,cellID) %>%
filter(corr == max(corr)) %>%
ggplot(aes(x = corr,fill = type)) +
geom_histogram(bins = 20) +
xlim(c(0,1)) +
xlab("Max CCF value") +
ggtitle("KM vs KNM Max CCFs - Bandpass Filter, Raw Values") +
theme_bw()
dat1 <- cmcR:::selectBFImpression_sample_x3p("~/bulletCartridgeScans/Fadul (2011)/cc/Fadul 1-1.x3p",
use_residuals = TRUE,
ransacInlierThresh = (10^-5),
ransacIters = 100) %>%
cmcR:::gaussianFilterBF(wavelength = c(16,250),
filtertype = "bp")
dat2 <- cmcR:::selectBFImpression_sample_x3p("~/bulletCartridgeScans/Fadul (2011)/cc/Fadul 1-2.x3p",
use_residuals = TRUE,
ransacInlierThresh = (10^-5),
ransacIters = 100) %>%
cmcR:::gaussianFilterBF(wavelength = c(16,250),
filtertype = "bp")
dat1$surface.matrix %>%
as.cimg() %>%
plot()
dat2$surface.matrix %>%
as.cimg() %>%
plot()
dat3 <- cellCCF(dat1$surface.matrix,
dat2$surface.matrix,thetas = seq(-30,30,by = 1),
horizSplits = 8,
vertSplits = 8)
dat3 %>%
map2_dfr(.x = .,
.y = names(.),
~ .x %>%
mutate(theta = rep(.y,times = nrow(.)))) %>%
group_by(cellID) %>%
filter(corr == max(corr)) %>%
ggplot(aes(x = corr)) +
geom_histogram(bins = 30) +
xlim(c(0,1)) +
xlab("Max CCF value distribution") +
theme_bw() +
ggtitle("Known-match Max CCF distribution")
# dat1 <- cmcR:::selectBFImpression_sample_x3p("~/bulletCartridgeScans/Fadul (2011)/cc/Fadul 1-1.x3p",
#                                          use_residuals = TRUE,
#                                          ransacInlierThresh = (10^-5),
#                                          ransacIters = 100) %>%
#   cmcR:::gaussianFilterBF(wavelength = c(16,250),
#                           filtertype = "bp")
dat2 <- cmcR:::selectBFImpression_sample_x3p("~/bulletCartridgeScans/fadul_allScans/Fadul_8/cc/Fadul X.x3p",
use_residuals = TRUE,
ransacInlierThresh = (10^-5),
ransacIters = 100) %>%
cmcR:::gaussianFilterBF(wavelength = c(16,250),
filtertype = "bp")
dat1$surface.matrix %>%
as.cimg() %>%
plot()
dat2$surface.matrix %>%
as.cimg() %>%
plot()
dat4 <- cellCCF(dat1$surface.matrix,
dat2$surface.matrix,thetas = seq(-30,30,by = 1),
horizSplits = 8,
vertSplits = 8)
# dat1 <- cmcR:::selectBFImpression_sample_x3p("~/bulletCartridgeScans/Fadul (2011)/cc/Fadul 1-1.x3p",
#                                          use_residuals = TRUE,
#                                          ransacInlierThresh = (10^-5),
#                                          ransacIters = 100) %>%
#   cmcR:::gaussianFilterBF(wavelength = c(16,250),
#                           filtertype = "bp")
dat2 <- cmcR:::selectBFImpression_sample_x3p("~/bulletCartridgeScans/fadul_allScans/Fadul_8/cc/Fadul X.x3p",
use_residuals = TRUE,
ransacInlierThresh = (10^-5),
ransacIters = 100) %>%
cmcR:::gaussianFilterBF(wavelength = c(16,250),
filtertype = "bp")
dat1$surface.matrix %>%
as.cimg() %>%
plot()
dat2$surface.matrix %>%
as.cimg() %>%
plot()
dat4 <- cellCCF(dat1$surface.matrix,
dat2$surface.matrix,thetas = seq(-30,30,by = 1),
horizSplits = 8,
vertSplits = 8)
dat4 %>%
map2_dfr(.x = .,
.y = names(.),
~ .x %>%
mutate(theta = rep(.y,times = nrow(.)))) %>%
group_by(cellID) %>%
filter(corr == max(corr)) %>%
ggplot(aes(x = corr)) +
geom_histogram() +
xlim(c(0,1)) +
xlab("Max CCF value distribution")
dat3 %>%
map2_dfr(.x = .,
.y = names(.),
~ .x %>%
mutate(theta = rep(.y,times = nrow(.)),
type = "known match")) %>%
bind_rows(dat4 %>%
map2_dfr(.x = .,
.y = names(.),
~ .x %>%
mutate(theta = rep(.y,times = nrow(.)),
type = "known non-match"))) %>%
group_by(type,cellID) %>%
filter(corr == max(corr)) %>%
ggplot(aes(x = corr,fill = type)) +
geom_histogram(bins = 20) +
xlim(c(0,1)) +
xlab("Max CCF value") +
ggtitle("KM vs KNM Max CCFs - Bandpass Filter, Residuals") +
theme_bw()
