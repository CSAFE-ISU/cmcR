<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Remove observations from the exterior of interior of a breech face scan — preProcess_crop • cmcR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Remove observations from the exterior of interior of a breech face scan — preProcess_crop" />
<meta property="og:description" content="Remove observations from the exterior of interior of a breech face scan" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cmcR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/cmcR_plotReproduction.html">Reproduction of Song et al. (2018) plots using the cmcR package</a>
    </li>
    <li>
      <a href="../articles/decisionRuleDescription.html">CMC Decision Rule Description</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Remove observations from the exterior of interior of a breech face scan</h1>
    
    <div class="hidden name"><code>preProcess_crop.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Remove observations from the exterior of interior of a breech face scan</p>
    </div>

    <pre class="usage"><span class='fu'>preProcess_crop</span><span class='op'>(</span>
  <span class='va'>x3p</span>,
  region <span class='op'>=</span> <span class='st'>"exterior"</span>,
  radiusOffset <span class='op'>=</span> <span class='fl'>0</span>,
  croppingThresh <span class='op'>=</span> <span class='fl'>1</span>,
  agg_function <span class='op'>=</span> <span class='va'>median</span>,
  scheme <span class='op'>=</span> <span class='fl'>3</span>,
  high_connectivity <span class='op'>=</span> <span class='cn'>FALSE</span>,
  tolerance <span class='op'>=</span> <span class='fl'>0</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x3p</th>
      <td><p>an x3p object containing the surface matrix of a cartridge case
scan</p></td>
    </tr>
    <tr>
      <th>region</th>
      <td><p>dictates whether the observations on the "exterior" or
"interior" of the scan are removed</p></td>
    </tr>
    <tr>
      <th>radiusOffset</th>
      <td><p>number of pixels to add to estimated breech face radius.
This is commonly a negative value (e.g., -30 for region = "exterior") to
trim the cartridge case primer roll-off from the returned, cropped surface
matrix or a positive value (e.g., 200 for region = "interior") to remove
observations around the firing pin impression hole.</p></td>
    </tr>
    <tr>
      <th>croppingThresh</th>
      <td><p>minimum number of non-NA pixels that need to be in a
row/column for it to not be cropped out of the breech face scan exterior</p></td>
    </tr>
    <tr>
      <th>agg_function</th>
      <td><p>the breech face radius estimation procedure returns a
number of radius estimates. This argument dictates the function used to
aggregate these into a final estimate.</p></td>
    </tr>
    <tr>
      <th>scheme</th>
      <td><p>argument for imager::imgradient</p></td>
    </tr>
    <tr>
      <th>high_connectivity</th>
      <td><p>argument for imager::label</p></td>
    </tr>
    <tr>
      <th>tolerance</th>
      <td><p>argument for imager::label</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An x3p object containing the surface matrix of a breech face
impression scan where the observations on the exterior/interior of the
breech face scan surface.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>The radius estimation procedure tends to over-estimate the desired
radius values. As such, a lot of the breech face impression "roll-off" is
included in the final scan. Excessive roll-off can bias the calculation of
the CCF. As such, we can manually shrink the radius estimate (-30 or -30
seems to work well for the Fadul cartridge cases) so that little to no
roll-off is included in the final processed scan.</p>
<p>The radius estimation procedure is effective at estimating the radius of
the firing pin hole. Unfortunately, it is often desired that more than just
observations in firing pin hole are removed. In particular, the plateaued
region surrounding the firing pin impression hole does not come into contact
with the breech face of a firearm and is thus unwanted in the final,
processed scan. The radiusOffset argument must be tuned (around 200 seems to
work well for the Fadul cartridge cases) to remove these unwanted
observations.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'>#Process fadul1.1 "from scratch" (takes &gt; 5 seconds to run)</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='va'>nbtrd_link</span> <span class='op'>&lt;-</span> <span class='st'>"https://tsapps.nist.gov/NRBTD/Studies/CartridgeMeasurement/"</span>
<span class='va'>fadul1.1_link</span> <span class='op'>&lt;-</span> <span class='st'>"DownloadMeasurement/2d9cc51f-6f66-40a0-973a-a9292dbee36d"</span>

<span class='va'>fadul1.1</span> <span class='op'>&lt;-</span> <span class='fu'>x3ptools</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/x3ptools/man/x3p_read.html'>read_x3p</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='va'>nbtrd_link</span>,<span class='va'>fadul1.1_link</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>fadul1.1_extCropped</span> <span class='op'>&lt;-</span> <span class='fu'>preProcess_crop</span><span class='op'>(</span>x3p <span class='op'>=</span> <span class='va'>fadul1.1</span>,
                                       radiusOffset <span class='op'>=</span> <span class='op'>-</span><span class='fl'>30</span>,
                                       region <span class='op'>=</span> <span class='st'>"exterior"</span><span class='op'>)</span>

<span class='va'>fadul1.1_extIntCropped</span> <span class='op'>&lt;-</span> <span class='fu'>preProcess_crop</span><span class='op'>(</span>x3p <span class='op'>=</span> <span class='va'>fadul1.1_extCropped</span>,
                                          radiusOffset <span class='op'>=</span> <span class='fl'>200</span>,
                                          region <span class='op'>=</span> <span class='st'>"interior"</span><span class='op'>)</span>

<span class='fu'><a href='x3pListPlot.html'>x3pListPlot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='st'>"Original"</span> <span class='op'>=</span> <span class='va'>fadul1.1</span>,
                 <span class='st'>"Exterior Cropped"</span> <span class='op'>=</span> <span class='va'>fadul1.1_extCropped</span>,
                 <span class='st'>"Exterior &amp; Interior Cropped"</span> <span class='op'>=</span> <span class='va'>fadul1.1_extIntCropped</span> <span class='op'>)</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Joe Zemmels, Heike Hofmann, Susan VanderPlas.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


